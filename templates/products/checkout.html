{% extends "products/ecommBase.html" %}
{% load static %}
{% block style %}


<style>
    .card .bg-image {
    border-top-left-radius: .5rem;
    border-top-right-radius: .5rem;
    padding: 0;
}
.bg-image {
    position: relative;
    overflow: hidden;
    background-repeat: no-repeat;
    background-size: cover;
    background-position: 50%;
}
.img-fluid, .img-thumbnail {
    max-width: 100%;
    height: auto;
}
.mask {
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 100%;
    overflow: hidden;
    background-attachment: fixed;
}
.shadow-3 {
    -webkit-box-shadow: 0 4px 6px -1px rgba(0,0,0,.07),0 2px 4px -1px rgba(0,0,0,.05)!important;
    box-shadow: 0 4px 6px -1px rgba(0,0,0,.07),0 2px 4px -1px rgba(0,0,0,.05)!important;
}
.form-outline .form-control.form-control-lg {
    font-size: 1rem;
    line-height: 2.15;
    padding-left: .75em;
    padding-right: .75em;
}
.form-outline .form-control.form-control-lg~.form-label {
    padding-top: .7rem;
}

.form-outline .form-control~.form-label {
    position: absolute;
    top: 0;
    max-width: 90%;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    left: .75rem;
    padding-top: .37rem;
    pointer-events: none;
    -webkit-transform-origin: 0 0;
    transform-origin: 0 0;
    -webkit-transition: all .2s ease-out;
    transition: all .2s ease-out;
    color: rgba(0,0,0,.6);
    margin-bottom: 0;
}
.form-outline {
    position: relative;
}

.select-input.form-control[readonly]:not([disabled]) {
    background-color: transparent;
}
.payment_type{

    color: #000;
    padding: 3px;
    border: 1px solid #3E83C5;
    border-radius: 5px;
}
.payment_type.active{
    background-color: #3E83C5;
    color: #fff;
}
</style>
{% endblock %}

{% block content %}
   <div class="container py-5">
       <a href="{% url 'cart' %}"><i class="fa fa-arrow-left"></i> Go back to Cart</a>
        <div class="row d-flex justify-content-center align-items-center">
          <div class="col">
            <div class="card my-4 shadow-3">
              <div class="row g-0">
                <div class="col-xl-6 d-xl-block bg-image">
                  <img src="https://mdbootstrap.com/img/Others/extended-example/delivery.jpg"
                    alt="Sample photo" class="img-fluid" />
                  <div class="mask" style="background-color: rgba(0, 0, 0, 0.6)">
                    <div class=" justify-content-center align-items-center h-100">
                      <div class=" text-center" style="margin-top: 220px;">
                        <i class="fa fa-truck text-white fa-3x"></i>
                        <p class="text-white title-style">The Men's Wall delivery</p>
                        <p class="text-white mb-0"></p>

                        <figure class="text-center mb-0">
                          <blockquote class="blockquote text-white">
                            <p class="pb-3">
                              <i class="fa fa-quote-left fa-xs text-primary"
                                style="color: hsl(210, 100%, 50%) ;"></i>
                              <span class="lead font-italic">Everything at your doorstep.</span>
                              <i class="fa fa-quote-right fa-xs text-primary"
                                style="color: hsl(210, 100%, 50%) ;"></i>
                            </p>
                          </blockquote>

                        </figure>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-xl-6">
                  <div class="card-body p-md-5 text-black">
                    <h3 class="mb-4 text-uppercase">Delivery Info</h3>

                    <form action="{% url 'placeOrder' %}" method="post">{% csrf_token %}

                        <div id="cartProducts" style="display: none">

                        </div>
                         <div class="row">
                      <div class="col-md-12 mb-4">
                        <div class="form-outline">
                          <input type="text" name="fullname" id="form3Example1m" class="form-control form-control-lg" value="{{ user.fullname }}"  disabled/>

                        </div>
                      </div>

                    </div>

                    <div class="form-outline mb-4">
                        <label class="" for="form3Example8">Address Line 1</label>
                      <input type="text" name="address1" id="form3Example8" class="form-control form-control-lg" />

                    </div>

                      <div class="form-outline mb-4">
                          <label class="" for="form3Example8">Address Line 2</label>
                      <input type="text" name="address2" id="form3Example8" class="form-control form-control-lg" />

                    </div>


                    <div class="row">
                      <div class="col-md-6 mb-4">
                        <div class="form-outline">
                             <label class="" for="City">City</label>
                       <input type="text" id="City" name="city" class="form-control form-control-lg" />

                      </div>
                      </div>
                      <div class="col-md-6 mb-4">
                        <div class="form-outline">
                            <label for="State">State</label>
                        <input type="text" id="State" name="state" class="form-control form-control-lg" />

                        </div>
                      </div>
                    </div>

                    <div class="row">
                          <div class="col-md-6 mb-4 ">
                              <div class="form-outline">
                                   <label class="" for="Zip">Zip</label>
                      <input type="text" id="Zip" name="zip" class="form-control form-control-lg" />

                    </div>
                          </div>
                      <div class="col-md-6 mb-4">
                          <div class="form-outline ">
                              <label class="" for="">Country</label>
                      <input type="text" id="Country" name="country" class="form-control form-control-lg" />

                          </div>
                    </div>

                    </div>

                    <div class="form-outline mb-4">
                      <input type="text" name="email" id="form3Example2" class="form-control form-control-lg" value="{{ user.email }}" disabled />

                    </div>

                    <hr/>
            <div class="row" style="padding: 2vh 0;">

                <div class="col" style="font-weight: bold">TOTAL Amount to Pay</div>
                <div class="col text-right" style="font-weight: bold"><span id="total_amount_to_pay" ></span> &#8377;</div>
                <input type="hidden" name="final_total" id="final_total">
                <input type="hidden" name="tax_price" id="tax_price">
                <input type="hidden" name="shipment_charge" id="shipment_charge">
            </div>
            <div>
                     <hr/>
                <h5>Select Payment Type</h5>
            <div class="row" style="padding: 2vh 0;">
                <input type="hidden" name="payment_type" id="payment_type_input">
                <div class="col-lg-6 col-md-6 col-xs-12 col-sm-12 select_payment">
                    <div class="text-center payment_type" id="cod">
                        Cash On Delivery
                    </div>
                </div>
                <div class="col-lg-6 col-md-6 col-xs-12 col-sm-12 ">
                    <div class="text-center payment_type" id="paypal">
                        Paypal
                    </div>
                </div>
            </div>
            </div>

                    <div class="d-flex justify-content-end pt-3">
                      <button type="submit" class="btn btn-success btn-lg ms-2"
                        style="background-color:hsl(210, 100%, 50%) ">Place order</button>
                    </div>

                    </form>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

{% endblock %}

{% block jsfiles %}

    <script>
         $(document).ready(function (){
             Mycart = JSON.parse(localStorage.getItem('Mycart'));
         if($.isEmptyObject(Mycart)){
             location.href="/orders/cart"
         }
          for (var item in Mycart) {

        $("#cartProducts").append(
            `
                <input type="hidden" name="prod[]" value="${Mycart[item][0]}" />
                <input type="hidden" name="qty[]" value="${Mycart[item][1]}" />
                <input type="hidden" name="color[]" value="${Mycart[item][6]}" />
                <input type="hidden" name="size[]" value="${Mycart[item][7]}" />
            `
        );


    }


         })
        var Counter = 0;
                for (count in Mycart) {
                    Counter += parseInt(Mycart[count][1]);
                }
            document.getElementById('CartCounter').innerHTML = Counter;

        ShipmentCart = JSON.parse(localStorage.getItem('ShipmentCart'));
        $("#total_amount_to_pay").html(ShipmentCart['total'])
        $("#final_total").val(ShipmentCart['total'])
        $("#tax_price").val(ShipmentCart['tax'])
        $("#shipment_charge").val(ShipmentCart['shipmentCharge'])



        $(".payment_type").click(function (){
        $(".payment_type").removeClass('active')

        $(this).toggleClass('active')
        $("#payment_type_input").val($(this).attr('id'))

    })
    </script>
{% endblock jsfiles %}